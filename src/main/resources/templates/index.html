<!doctype html>
<html lang="ro" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/head :: head('Cinema')}"></head>

<body>

<div th:replace="~{fragments/navbar :: navbar('home')}"></div>

<main class="container py-4 py-md-5">

  <!-- HERO: Featured movie -->
  <section class="hero hero-wrap p-4 p-md-5 mb-4" th:if="${featuredMovie != null}">

    <div class="row align-items-center g-4">
      <!-- LEFT -->
      <div class="col-lg-7 pt-4 pt-lg-5">

        <!-- cinema-like tagline -->
        <div class="text-uppercase mb-3"
             style="letter-spacing: .25em; font-size: 12px; color: var(--muted);">
          ExperienÈ›a cinematograficÄƒ Ã®ncepe aici
        </div>

        <div class="d-flex gap-2 mb-3 flex-wrap">
          <span class="badge text-bg-dark border">Now in cinemas</span>
          <span class="badge text-bg-dark border" th:text="${featuredMovie.genre}">Genre</span>
          <span class="badge text-bg-dark border">
            <span th:text="${featuredMovie.duration}">120</span> min
          </span>
        </div>

        <!-- title a bit smaller -->
        <h1 class="h3 fw-semibold mb-3" th:text="${featuredMovie.title}">Featured movie</h1>

        <div class="d-flex gap-2 flex-wrap">
          <a class="btn btn-primary"
             th:href="@{/movies/{id}(id=${featuredMovie.idMovie})}">
            Vezi detalii
          </a>
          <a class="btn btn-outline-light" th:href="@{/movies}">
            Vezi toate filmele
          </a>
        </div>
      </div>

      <!-- RIGHT -->
      <div class="col-lg-5">
        <div class="card p-2 p-md-3 poster-card">
          <div class="ratio rounded overflow-hidden"
               style="--bs-aspect-ratio: 150%; background: rgba(255,255,255,0.06);">

            <img th:src="${featuredMovie.imageUrl != null and (#strings.startsWith(featuredMovie.imageUrl,'http') or #strings.startsWith(featuredMovie.imageUrl,'/'))
              ? featuredMovie.imageUrl
              : '/img/movies/' + (featuredMovie.imageUrl != null ? featuredMovie.imageUrl : 'avatar.jpg')}"
                 alt="Poster"
                 class="w-100 h-100"
                 style="object-fit: cover;"
                 onerror="this.onerror=null; this.src='/img/movies/avatar.jpg'">
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- NOW PLAYING -->
  <section class="mt-4">
    <div class="d-flex justify-content-between align-items-end gap-3 mb-3">
      <div>
        <h2 class="h4 mb-1">Filmele din cinema acum</h2>
        <div style="color: var(--muted);">Alege un film È™i intrÄƒ pe pagina de detalii.</div>
      </div>
      <a class="btn btn-sm btn-outline-light" th:href="@{/movies}">Program complet</a>
    </div>

    <div class="row g-3">
      <div class="col-6 col-md-4 col-lg-3" th:each="m : ${moviesNow}">
        <div class="card h-100 movie-card">
          <div class="ratio rounded overflow-hidden"
               style="--bs-aspect-ratio: 150%; background: rgba(255,255,255,0.06);">

            <img th:src="${m.imageUrl != null and (#strings.startsWith(m.imageUrl,'http') or #strings.startsWith(m.imageUrl,'/'))
              ? m.imageUrl
              : '/img/movies/' + (m.imageUrl != null ? m.imageUrl : 'avatar.jpg')}"
                 alt="Poster"
                 class="w-100 h-100"
                 style="object-fit: cover;"
                 onerror="this.onerror=null; this.src='/img/movies/avatar.jpg'">
          </div>

          <div class="p-3 d-flex flex-column gap-2">
            <div class="fw-semibold" th:text="${m.title}">Movie title</div>

            <div class="small" style="color: var(--muted);">
              <span th:text="${m.genre}">Genre</span>
              <span class="mx-1">â€¢</span>
              <span th:text="${m.duration}">120</span> min
            </div>

            <a class="btn btn-sm btn-primary mt-1"
               th:href="@{/movies/{id}(id=${m.idMovie})}">
              Detalii film
            </a>
          </div>
        </div>
      </div>

      <div class="col-12" th:if="${#lists.isEmpty(moviesNow)}">
        <div class="card p-3" style="color: var(--muted);">
          Nu existÄƒ filme active Ã®n acest moment.
          <a class="ms-2 link-light" th:href="@{/movies}">Vezi toate filmele</a>.
        </div>
      </div>
    </div>
  </section>

  <!-- COMING SOON -->
  <section class="mt-5">
    <div class="d-flex justify-content-between align-items-end gap-3 mb-3">
      <div>
        <h2 class="h4 mb-1">Filme care urmeazÄƒ</h2>
        <div style="color: var(--muted);">Ãn curÃ¢nd pe marele ecran.</div>
      </div>
      <a class="btn btn-sm btn-outline-light" th:href="@{/movies}">Vezi toate</a>
    </div>

    <div class="row g-3">
      <div class="col-6 col-md-4 col-lg-3" th:each="m : ${moviesUpcoming}">
        <div class="card h-100 movie-card">
          <div class="ratio rounded overflow-hidden"
               style="--bs-aspect-ratio: 150%; background: rgba(255,255,255,0.06);">

            <img th:src="${m.imageUrl != null and (#strings.startsWith(m.imageUrl,'http') or #strings.startsWith(m.imageUrl,'/'))
              ? m.imageUrl
              : '/img/movies/' + (m.imageUrl != null ? m.imageUrl : 'avatar.jpg')}"
                 alt="Poster"
                 class="w-100 h-100"
                 style="object-fit: cover;"
                 onerror="this.onerror=null; this.src='/img/movies/avatar.jpg'">
          </div>

          <div class="p-3 d-flex flex-column gap-2">
            <div class="fw-semibold" th:text="${m.title}">Movie title</div>

            <div class="small" style="color: var(--muted);">
              <span th:text="${m.genre}">Genre</span>
              <span class="mx-1">â€¢</span>
              <span th:text="${m.duration}">120</span> min
            </div>

            <div class="small" style="color: var(--muted);" th:if="${m.runFrom != null}">
              Din <span th:text="${#temporals.format(m.runFrom, 'dd MMM yyyy')}">01 Jan 2026</span>
            </div>

            <a class="btn btn-sm btn-outline-light mt-1"
               th:href="@{/movies/{id}(id=${m.idMovie})}">
              Detalii film
            </a>
          </div>
        </div>
      </div>

      <div class="col-12" th:if="${#lists.isEmpty(moviesUpcoming)}">
        <div class="card p-3" style="color: var(--muted);">
          Momentan nu avem filme anunÈ›ate â€œÃ®n curÃ¢ndâ€.
        </div>
      </div>
    </div>
  </section>


  <!-- EXTRA -->
  <section class="row g-3 mt-4">
    <div class="col-md-4">
      <a class="card p-3 h-100 text-decoration-none text-reset feature-card" th:href="@{/food}">
        <div class="fw-semibold mb-1">ğŸ¿ Food & Drinks</div>
        <div style="color: var(--muted);">ComandÄƒ popcorn È™i bÄƒuturi direct din aplicaÈ›ie.</div>
      </a>
    </div>
    <div class="col-md-4">
      <a class="card p-3 h-100 text-decoration-none text-reset feature-card" th:href="@{/movies}">
        <div class="fw-semibold mb-1">ğŸŸï¸ RezervÄƒ rapid</div>
        <div style="color: var(--muted);">Alege filmul, ora È™i locurile Ã®n cÃ¢teva clickuri.</div>
      </a>
    </div>
    <div class="col-md-4">
      <a class="card p-3 h-100 text-decoration-none text-reset feature-card" th:href="@{/account}">
        <div class="fw-semibold mb-1">ğŸ‘¤ Contul tÄƒu</div>
        <div style="color: var(--muted);">IntrÄƒ Ã®n cont ca sÄƒ vezi rezervÄƒrile tale.</div>
      </a>
    </div>
  </section>

</main>

<div th:replace="~{fragments/footer :: footer}"></div>
<div th:replace="~{fragments/scripts :: scripts}"></div>

</body>
</html>
